depth, bedgraph, wig, bigwig之间的联系与区别
## depth
```
samtools depth input.bam > depth.txt

```

## bedgraph

+ 存放区间的坐标轴信息和相关评分(score)的文件，主要用于存储稀疏，不连续的数据
+ 后缀名.bedGraph
+ 一般UCSC不建议采用该格式作为基因组浏览器输入文件，因为考虑到数据集大小与索引构建，都不如 bigwig 更高效，尤其在如果bedGraph数据集非常大（超过5000万行 ），推荐转为 bigwig 文件
+ 使用WigTobigWig将 bedGraph 转换为bigWig 文件，文件格式转换详解
+ 需要注意 bedGraph 文件不能转换为 wig 文件

首先来介绍下bedgraph格式，这种格式实际上就是用窗口的方式代替原始的每个碱基的测序深度，文件内容可以分为两个部分
```
1. track  line
2. data line
```
track line是首行的一句声明，内容如下
```
track type=bedGraph
```
> http://genome.ucsc.edu/goldenPath/help/bedgraph.html
```
bedGraphToBigWig程序比未压缩的bedGraph输入文件使用的RAM多大约25％ 。

类似于上述过程，这里简写

wget http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/fetchChromSizes

fetchChromSizes hg38 > hg38.chrom.sizes

wget http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bedGraphToBigWig

bedGraphToBigWig in.bedGraph hg38.chrom.sizes out.bw

如果报错染色体长度超出，需要先剪切bed
用到的工具：wget http://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/bedClip
bedClip input.bed hg38.chrom.sizes output.bed

```

### bedGraphToBigWig
## wiggle
+ 存放区间的坐标轴信息（如染色质可及性，转录因子结合区域）和相关评分(score)的文件，主要用于存储密集，连续的数据
+ 主要用于在基因组浏览器上查看数据的连续密度图
+ wig或bedGraph的索引二进制文件，也就是可以由这两种文件转换得到
+ 后缀名：.bw，.bigwig
+ 在处理大型数据集时，bigWig文件的显示性能比常规的wig文件快得多
+ 数据必须是连续的并且由大小相等的元素组成，如果数据是稀疏或包含大小不同的元素时，请使用bedGraph格式

```
2、创建chrom.sizes文件

wget http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/fetchChromSizes

fetchChromSizes hg38 > hg38.chrom.sizes

3、转换为 bigWig 文件

http://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/wigToBigWig

wigToBigWig input.wig hg38.chrom.sizes BigWig.bw

```

#### ref_info
http://barcwiki.wi.mit.edu/wiki/SOPs/coordinates


## 
https://github.com/brentp/mosdepth
https://github.com/telatin/covtobed/wiki
